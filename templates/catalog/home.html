{% extends 'base.html' %}
{% load static %}

{% block title %}Supermercado Online - {{ shop.name }}{% endblock %}


{% block content %}
<div class="container" style="padding-top: 24px;">
    <!-- Hero Slider -->
    <div class="swiper hero-swiper">
        <div class="swiper-wrapper">
            {% if banners %}
            {% for banner in banners %}
            <div class="swiper-slide">
                <img src="{{ banner.image.url }}" alt="{{ banner.title }}">
                <div class="hero-overlay"
                    style="background: linear-gradient(90deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 60%); position: absolute; top:0; left:0; width:100%; height:100%;">
                </div>
                <div class="hero-content">
                    <h2 class="hero-title">{{ banner.title }}</h2>
                    <p class="hero-subtitle">Ofertas exclusivas e produtos frescos todos os dias.</p>
                    <a href="{{ banner.link|default:'/ofertas/' }}" class="btn-hero">Ver Ofertas</a>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <div class="swiper-slide">
                <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?q=80&w=2070&auto=format&fit=crop"
                    alt="Supermercado">
                <div class="hero-overlay"
                    style="background: linear-gradient(90deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 60%); position: absolute; top:0; left:0; width:100%; height:100%;">
                </div>
                <div class="hero-content">
                    <h2 class="hero-title">üõí Ofertas da Semana</h2>
                    <p class="hero-subtitle">Economia de verdade no seu dia a dia.</p>
                    <a href="/ofertas/" class="btn-hero">Ver Ofertas</a>
                </div>
            </div>
            {% endif %}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <!-- How it Works -->
    <section class="how-it-works">
        <div class="container">
            <div class="how-grid">
                <div class="how-item">
                    <span class="icon">üõí</span>
                    <h4>1. Escolha</h4>
                    <p>Adicione produtos fresquinhos ao seu carrinho.</p>
                </div>
                <div class="how-item">
                    <span class="icon">üí≥</span>
                    <h4>2. Pague</h4>
                    <p>Pague com seguran√ßa via PIX ou Cart√£o.</p>
                </div>
                <div class="how-item">
                    <span class="icon">üöö</span>
                    <h4>3. Receba</h4>
                    <p>Entregamos com todo cuidado na sua casa.</p>
                </div>
                <div class="how-item">
                    <span class="icon">‚úÖ</span>
                    <h4>4. Aproveite</h4>
                    <p>Sua compra garantida e voc√™ economizando tempo.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Categories Grid -->
    <section class="featured-categories">
        <div class="section-header">
            <h3 class="section-title">üì¶ Compre por Categoria</h3>
        </div>
        <div class="category-grid">
            <a href="#" class="category-card">
                <span class="icon">üçé</span>
                <span>Hortifr√∫ti</span>
            </a>
            <a href="#" class="category-card">
                <span class="icon">ü•©</span>
                <span>Carnes</span>
            </a>
            <a href="#" class="category-card">
                <span class="icon">ü•ñ</span>
                <span>Padaria</span>
            </a>
            <a href="#" class="category-card">
                <span class="icon">üßÄ</span>
                <span>Latic√≠nios</span>
            </a>
            <a href="#" class="category-card">
                <span class="icon">ü•§</span>
                <span>Bebidas</span>
            </a>
            <a href="#" class="category-card">
                <span class="icon">üõí</span>
                <span>Mercearia</span>
            </a>
            <a href="#" class="category-card">
                <span class="icon">üßπ</span>
                <span>Limpeza</span>
            </a>
            <a href="#" class="category-card">
                <span class="icon">‚ùÑÔ∏è</span>
                <span>Congelados</span>
            </a>
        </div>
    </section>

    <!-- Ofertas da Semana (Horizontal Carousel) -->
    {% if sale_products %}
    <section class="vitrine">
        <div class="section-header">
            <h2 class="section-title"><span>üî•</span> Ofertas da Semana</h2>
            <a href="{% url 'offers' %}" class="view-all">Ver todas as ofertas &raquo;</a>
        </div>
        <div class="swiper offers-swiper">
            <div class="swiper-wrapper">
                {% for product in sale_products|slice:":12" %}
                <div class="swiper-slide">
                    {% include 'components/product_card.html' with product=product price=product.price %}
                </div>
                {% endfor %}
            </div>
            <div class="swiper-button-next" style="color: var(--brand-green);"></div>
            <div class="swiper-button-prev" style="color: var(--brand-green);"></div>
        </div>
    </section>
    {% endif %}

    <!-- Secondary Banners -->
    <section class="secondary-banners"
        style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 48px;">
        <div class="banner-item"
            style="height: 180px; border-radius: 12px; overflow: hidden; background: #EEE; transition: transform 0.2s;">
            <img src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?q=80&w=2070&auto=format&fit=crop"
                alt="Vinhos" style="width: 100%; height: 100%; object-fit: cover;">
            <div class="banner-text"
                style="position: absolute; bottom: 20px; left: 20px; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.5);">
                <h4 style="font-size: 1.5rem; font-weight: 800;">Festival de Vinhos</h4>
                <p>Confira nossa sele√ß√£o exclusiva</p>
            </div>
        </div>
        <div class="banner-item"
            style="height: 180px; border-radius: 12px; overflow: hidden; background: #EEE; transition: transform 0.2s;">
            <img src="https://images.unsplash.com/photo-1556228578-8c7c2f22ba55?q=80&w=2070&auto=format&fit=crop"
                alt="Padaria" style="width: 100%; height: 100%; object-fit: cover;">
            <div class="banner-text"
                style="position: absolute; bottom: 20px; left: 20px; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.5);">
                <h4 style="font-size: 1.5rem; font-weight: 800;">Padaria Artesanal</h4>
                <p>P√£es quentinhos toda hora</p>
            </div>
        </div>
    </section>

    <!-- Trust Badges (Relocated to bottom or kept as is) -->
    <!-- (I'll keep the previous trust badges but style them as secondary banners if needed, or just let them stay below) -->
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const swiper = new Swiper('.hero-swiper', {
            loop: true,
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });

        const offersSwiper = new Swiper('.offers-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: false,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            breakpoints: {
                320: { slidesPerView: 2, spaceBetween: 10 },
                480: { slidesPerView: 2, spaceBetween: 15 },
                768: { slidesPerView: 4, spaceBetween: 20 },
                1024: { slidesPerView: 5, spaceBetween: 20 },
            }
        });
    });
</script>
{% endblock %}