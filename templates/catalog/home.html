{% extends 'base.html' %}
{% load static %}

{% block title %}Supermercado Online - {{ shop.name }}{% endblock %}


{% block content %}
<div class="container" style="padding-top: 24px;">
    <!-- Hero Slider -->
    <!-- Hero Slider -->
    <div class="swiper hero-swiper{% if not banners %} hero-empty{% endif %}">
        <div class="swiper-wrapper">
            {% if banners %}
            {% for banner in banners %}
            <div class="swiper-slide">
                {% if banner.image %}
                <img src="{{ banner.image.url }}" alt="{{ banner.title }}">
                {% else %}
                <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?q=80&w=2070&auto=format&fit=crop"
                    alt="{{ banner.title }}">
                {% endif %}
                <div class="hero-overlay"
                    style="background: linear-gradient(90deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 60%); position: absolute; top:0; left:0; width:100%; height:100%;">
                </div>
                <div class="hero-content">
                    <h2 class="hero-title">{{ banner.title }}</h2>
                    <p class="hero-subtitle">Ofertas exclusivas e produtos frescos todos os dias.</p>
                    <a href="{{ banner.link|default:'/ofertas/' }}" class="btn-hero">Ver Ofertas</a>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <div class="swiper-slide">
                <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?q=80&w=2070&auto=format&fit=crop"
                    alt="Supermercado">
                <div class="hero-overlay"
                    style="background: linear-gradient(90deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.2) 60%); position: absolute; top:0; left:0; width:100%; height:100%;">
                </div>
                <div class="hero-content">
                    <h2 class="hero-title">üõí Ofertas da Semana</h2>
                    <p class="hero-subtitle">Economia de verdade no seu dia a dia.</p>
                    <a href="/ofertas/" class="btn-hero">Ver Ofertas</a>
                </div>
            </div>
            {% endif %}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <div class="home-sections">
        <!-- Ofertas da Semana (Horizontal Carousel) -->
        {% if sale_products %}
        <section class="vitrine section-offers">
            <div class="section-header">
                <h2 class="section-title"><span>üî•</span> Ofertas da Semana</h2>
                <a href="{% url 'offers' %}" class="view-all">Ver todas as ofertas &raquo;</a>
            </div>
            <div class="swiper offers-swiper">
                <div class="swiper-wrapper">
                    {% for product in sale_products|slice:":12" %}
                    <div class="swiper-slide">
                        {% include 'components/product_card.html' with product=product price=product.price %}
                    </div>
                    {% endfor %}
                </div>
                <div class="swiper-button-next" style="color: var(--brand-green);"></div>
                <div class="swiper-button-prev" style="color: var(--brand-green);"></div>
            </div>
        </section>
        {% endif %}

        <!-- How it Works -->
        <section class="how-it-works section-how">
            <div class="container">
                <div class="how-grid">
                    <div class="how-item">
                        <span class="icon">üõí</span>
                        <h4>1. Escolha</h4>
                        <p>Adicione produtos fresquinhos ao seu carrinho.</p>
                    </div>
                    <div class="how-item">
                        <span class="icon">üí≥</span>
                        <h4>2. Pague</h4>
                        <p>Pague com seguran√ßa via PIX ou Cart√£o.</p>
                    </div>
                    <div class="how-item">
                        <span class="icon">üöö</span>
                        <h4>3. Receba</h4>
                        <p>Entregamos com todo cuidado na sua casa.</p>
                    </div>
                    <div class="how-item">
                        <span class="icon">‚úÖ</span>
                        <h4>4. Aproveite</h4>
                        <p>Sua compra garantida e voc√™ economizando tempo.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Featured Categories Grid -->
        <section class="featured-categories section-categories">
            <div class="section-header">
                <h3 class="section-title">üì¶ Compre por Categoria</h3>
            </div>
            <div class="category-grid">
                {% for cat in categories_grid %}
                <a href="{% url 'category_list' cat.slug %}" class="category-card">
                    <span class="icon">
                        {% if cat.slug == 'hortifruti' %}üçé
                        {% elif cat.slug == 'padaria' %}ü•ñ
                        {% elif cat.slug == 'bebidas' %}ü•§
                        {% elif cat.slug == 'laticinios' %}üßÄ
                        {% elif cat.slug == 'limpeza' %}üßπ
                        {% elif cat.slug == 'carnes' %}ü•©
                        {% elif cat.slug == 'congelados' %}‚ùÑÔ∏è
                        {% elif cat.slug == 'mercearia' %}üõí
                        {% else %}üì¶{% endif %}
                    </span>
                    <span>{{ cat.name }}</span>
                </a>
                {% endfor %}
            </div>
        </section>

        <!-- Secondary Banners -->
        <section class="secondary-banners">
            <a href="{% url 'category_list' 'bebidas' %}" class="banner-item">
                <img src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?q=80&w=2070&auto=format&fit=crop"
                    alt="Vinhos">
                <div class="banner-text">
                    <h4>Festival de Vinhos</h4>
                    <p>Confira nossa sele√ß√£o exclusiva</p>
                </div>
            </a>
            <a href="{% url 'category_list' 'padaria' %}" class="banner-item">
                <img src="https://images.unsplash.com/photo-1556228578-8c7c2f22ba55?q=80&w=2070&auto=format&fit=crop"
                    alt="Padaria">
                <div class="banner-text">
                    <h4>Padaria Artesanal</h4>
                    <p>P√£es quentinhos toda hora</p>
                </div>
            </a>
        </section>

        <!-- Recipes / Blog Section -->
        <section class="recipes-section">
            <div class="section-header">
                <h3 class="section-title">üë®‚Äçüç≥ Receitas & Dicas do Chef</h3>
                <a href="#" class="view-all">Ver todas as receitas &raquo;</a>
            </div>
            <div class="recipes-grid">
                <div class="recipe-card">
                    <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?q=80&w=2000&auto=format&fit=crop"
                        alt="Salada">
                    <div class="recipe-content">
                        <span class="recipe-tag">Sa√∫de</span>
                        <h4>Salada Detox Tropical</h4>
                        <p>Aprenda a fazer uma salada refrescante para o ver√£o...</p>
                    </div>
                </div>
                <div class="recipe-card">
                    <img src="https://images.unsplash.com/photo-1473093226795-af9932fe5856?q=80&w=2000&auto=format&fit=crop"
                        alt="Pasta">
                    <div class="recipe-content">
                        <span class="recipe-tag">Massas</span>
                        <h4>Penne ao Molho Pesto Caseiro</h4>
                        <p>O segredo do pesto perfeito com manjeric√£o fresco...</p>
                    </div>
                </div>
                <div class="recipe-card">
                    <img src="https://images.unsplash.com/photo-1551024601-bec78aea704b?q=80&w=1964&auto=format&fit=crop"
                        alt="Sobremesa">
                    <div class="recipe-content">
                        <span class="recipe-tag">Sobremesas</span>
                        <h4>Donuts Recheados de Chocolate</h4>
                        <p>Uma receita f√°cil para alegrar a tarde da fam√≠lia...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trust Badges (Relocated to bottom or kept as is) -->
        <!-- (I'll keep the previous trust badges but style them as secondary banners if needed, or just let them stay below) -->
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const swiper = new Swiper('.hero-swiper', {
            loop: true,
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });

        const offersSwiper = new Swiper('.offers-swiper', {
            slidesPerView: 1.3,
            spaceBetween: 12,
            loop: false,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            breakpoints: {
                480: { slidesPerView: 2.3, spaceBetween: 15 },
                768: { slidesPerView: 4, spaceBetween: 20 },
                1024: { slidesPerView: 5, spaceBetween: 20 },
            }
        });
    });
</script>
{% endblock %}