{% load static %}
<header>
    <!-- Top Bar (Professional & Informative) -->
    <div class="header-top-bar">
        <div class="container flex-justify">
            <div class="top-bar-left">
                <span>ğŸš€ <strong>Entrega GrÃ¡tis</strong> em sua primeira compra</span>
                <span class="separator">|</span>
                <span>ğŸ“… Entrega no mesmo dia para pedidos atÃ© as 14h</span>
            </div>
            <div class="top-bar-right">
                <a href="#">Nossas Lojas</a>
                <a href="#">Trabalhe Conosco</a>
                <a href="#">Atendimento</a>
                <a href="#" class="btn-loyalty">ğŸ’³ PeÃ§a seu CartÃ£o</a>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <div class="header-main">
        <div class="container header-grid">
            <!-- Logo -->
            <div class="logo">
                <a href="{% url 'home' %}">
                    <img src="{% static 'img/logo.png' %}" alt="Lima Supermercado">
                </a>
            </div>

            <!-- Delivery Location -->
            <div class="header-location">
                <button class="btn-location">
                    <span class="icon">ğŸ“</span>
                    <div class="location-text">
                        <small>Entregar em:</small>
                        <strong>Informe seu CEP</strong>
                    </div>
                </button>
            </div>

            <!-- Search Bar (Wide & Prominent) -->
            <div class="search-bar">
                <form action="{% url 'search' %}" method="get">
                    <div class="search-input-group">
                        <input type="text" name="q" placeholder="Busque por produtos, marcas ou categorias..."
                            value="{{ query }}">
                        <button type="submit" class="btn-search">ğŸ”</button>
                    </div>
                </form>
            </div>

            <!-- User and Cart Actions -->
            <div class="header-actions">
                {% if user.is_authenticated %}
                <a href="#" class="icon-link">
                    <div class="icon-wrapper">ğŸ‘¤</div>
                    <div class="action-text">
                        <small>OlÃ¡, {{ user.username }}</small>
                        <strong>Minha Conta</strong>
                    </div>
                </a>
                {% else %}
                <a href="{% url 'login' %}" class="icon-link">
                    <div class="icon-wrapper">ğŸ‘¤</div>
                    <div class="action-text">
                        <small>Bem-vindo</small>
                        <strong>Entrar / Cadastrar</strong>
                    </div>
                </a>
                {% endif %}

                <a href="javascript:void(0)" class="btn-cart-header" onclick="toggleCart()">
                    <div class="cart-icon-container">
                        <span class="icon">ğŸ›’</span>
                        {% if cart %}
                        <span class="cart-count">{{ cart|length }}</span>
                        {% endif %}
                    </div>
                    <div class="cart-info">
                        <strong>Meu Carrinho</strong>
                        <span class="cart-total">
                            {% if cart %}{{ cart.get_total_price_display }}{% else %}R$ 0,00{% endif %}
                        </span>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- Navbar Menu (Icon-based & Sticky) -->
    <div class="header-nav sticky-nav">
        <div class="container">
            <nav class="categories-nav">
                <ul>
                    <li>
                        <a href="{% url 'offers' %}" class="nav-item highlight">
                            <span class="nav-icon">ğŸ”¥</span>
                            <span class="nav-text">Ofertas</span>
                        </a>
                    </li>
                    {% for cat in main_categories %}
                    <li>
                        <a href="{% url 'category_list' cat.slug %}" class="nav-item">
                            <span class="nav-icon">
                                {% if cat.slug == 'hortifruti' %}ğŸ
                                {% elif cat.slug == 'padaria' %}ğŸ¥–
                                {% elif cat.slug == 'bebidas' %}ğŸ¥¤
                                {% elif cat.slug == 'laticinios' %}ğŸ§€
                                {% elif cat.slug == 'limpeza' %}ğŸ§¹
                                {% elif cat.slug == 'carnes' %}ğŸ¥©
                                {% elif cat.slug == 'congelados' %}â„ï¸
                                {% elif cat.slug == 'mercearia' %}ğŸ›’
                                {% else %}ğŸ“¦{% endif %}
                            </span>
                            <span class="nav-text">{{ cat.name }}</span>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </nav>
        </div>
    </div>
</header>